name: Add PR to project

on:
  push:
    branches:
      - main

jobs:
  move_to_in_progress:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: 3.x
      
      - name: Install requests library
        run: |
          python -m pip install --upgrade pip
          pip install requests
      
      - name: Run script to add PR to project
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          project_number = 6
          url = "https://api.github.com/graphql"
          headers = {
            "Authorization": f"Bearer {GITHUB_TOKEN}"
          }
          query = f"""
            {{
              projectV2(number: {project_number}) {{
                id
              }}
            }}
          """
          response = requests.post(url, json={"query": query}, headers=headers)
          print(response.json())
